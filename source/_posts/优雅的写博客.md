title: 优雅地写博客
author: 九月八
date: 2020年8月26日 10:24:51
categories: 
  - hexo
tags: 
  - hexo
  - 总结
keywords: 
description: 
password: 
top: 
summary_img: /summary/summary000.jpeg
copyright: true

---

## MarkDown语法总结 

-------
### 初步进阶

最基本的语法略过，记录一下少见的语法：
#### 文本居中标签
作用：引用单行文本，作为文章开篇题词。

效果：
<blockquote class="blockquote-center">我不去想是否能够成功，既然选择了远方，便只顾风雨兼程。</blockquote>
使用：
```
<!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 -->
<!-- 其中 class="blockquote-center" 是必须的 -->
<blockquote class="blockquote-center">blah blah blah</blockquote>

<!-- 标签方式 -->
{% centerquote %}blah blah blah{% endcenterquote %}

<!-- 标签别名 -->
{% cq %} blah blah blah {% endcq %}
```

#### 代码块进阶用法
效果：
``` [JavaScript] [hello world] [https://baidu.com] [链接地址]
console.log("Hello world!");
```
使用：
```
``` [language] [title] [url] [link text]
code snippet
```.
```
各参数含义：
- langugae：语言名称，引导渲染引擎正确解析并高亮显示关键字
- title：代码块标题，将会显示在左上角
- url：链接地址，如果没有指定 link text 则会在右上角显示 link
- link text：链接名称，指定 url 后有效，将会显示在右上角

url 必须为有效链接地址才会以链接的形式显示在右上角，否则将作为标题显示在左上角。以 url 为分界，左侧除了第一个单词会被解析为 language，其他所有单词都会被解析为 title，而右侧的所有单词都会被解析为 link text。

如果不想填写 title，可以在 language 和 url 之间添加至少三个空格。

#### note标签

作用：通过note标签为段落添加背景颜色
使用：

```
{% note [class] %}
文本内容 (支持行内标签)
{% endnote %}
```

class种类包括default primary success info warning danger，也可以不指定 class。


#### lebal标签

作用：通过label标签为文字添加背景色
使用：
```
{% label [class]@text  %}
```

支持的 class 种类包括 default primary success info warning danger，默认使用 default 作为缺省。

使用示例：

```
I heard the echo, {% label default@from the valleys and the heart %}
Open to the lonely soul of {% label info@sickle harvesting %}
Repeat outrightly, but also repeat the well-being of
Eventually {% label warning@swaying in the desert oasis %}
{% label success@I believe %} I am
{% label primary@Born as the bright summer flowers %}
Do not withered undefeated fiery demon rule
Heart rate and breathing to bear {% label danger@the load of the cumbersome %}
Bored
```

效果如下：

I heard the echo, {% label default@from the valleys and the heart %}
Open to the lonely soul of {% label info@sickle harvesting %}
Repeat outrightly, but also repeat the well-being of
Eventually {% label warning@swaying in the desert oasis %}
{% label success@I believe %} I am
{% label primary@Born as the bright summer flowers %}
Do not withered undefeated fiery demon rule
Heart rate and breathing to bear {% label danger@the load of the cumbersome %}
Bored

#### button按钮

使用示例：
```
{% btn #, 文本 %}
{% btn #, 文本 & 标题,, 标题 %}
{% btn #, 文本 & 图标, home %}
{% btn #, 文本 & 大图标 (固定宽度), home fa-fw fa-lg %}
```
效果:

{% btn #, 文本 %}
{% btn #, 文本 & 标题,, 标题 %}
{% btn #, 文本 & 图标, home %}
{% btn #, 文本 & 大图标 (固定宽度), home fa-fw fa-lg %}

#### 引用站内链接

语法:

```
{% post_path hexo-writing-skills %}
{% post_link hexo-writing-skills 链接标题 %}
```

效果如下：

我是第一个标签：{% post_path titled %}

我是第二个标签：{% post_link MacOS开发环境的配置 我是链接 %}

注意：第一个标签中使用中文会进行urlencode，不太美观。

### 插入多媒体
#### 插入图片
直接使用Mweb，之前的方法和MWeb比起来，简直不是一个数量级的。
爽就一个字，我只说一次！
墙裂建议使用Mac的同学尝试一下。

#### 插入网易云音乐
在网页版网易云中找到想要插入的歌曲，点击生成外链播放器：

![](https://tuchuang-1258055330.cos.ap-chengdu.myqcloud.com/2020/08/26/15984127556340.jpg)
根据自己的需求生成：

![](https://tuchuang-1258055330.cos.ap-chengdu.myqcloud.com/2020/08/26/15984128149960.jpg)

但是，hexo渲染的时候，默认是把播放器的宽度拉满整个页款，有点别扭。所以做以下修改：

```[themes\next\source\js\src\utils.js]
var SUPPORTED_PLAYERS = [
  'www.youtube.com',
  'player.vimeo.com',
  'player.youku.com',
  //'music.163.com',
  'www.tudou.com'
];
```
播放器变成左对齐固定宽度，居中播放请加一个`<center></center>`标签

```
<center>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=27491508&auto=1&height=66"></iframe>
</center>
```
效果如下：
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=27491508&auto=1&height=66"></iframe>
</center>

上下有空行，可以尝试把html标签写到一行里面。

#### 插入Aplayer音频播放器

需要借助_hexo-tag-aplayer_插件，可以自定义页面播放器的设置。

在站点根目录下执行以下命令：

```
npm install hexo-tag-aplayer --save
```

然后在页面中按照以下的标签格式插入歌曲链接和相关信息：

```
{% aplayer title author url [picture_url, narrow, autoplay, width:xxx, lrc:xxx] %}
```

其中，各个参数的意义如下：
- title: 曲目标题
- author: 曲目作者
- url: 音乐文件 URL 地址
- picture_url: (可选) 音乐对应的图片地址
- narrow: （可选）播放器袖珍风格
- autoplay: (可选) 自动播放，移动端浏览器暂时不支持此功能
- width:xxx: (可选) 播放器宽度 (默认: 100%)
- lrc:xxx: （可选）歌词文件 URL 地址

#### 插入Dplayer视频播放器

因为个人应该不会使用这个功能，所所以安装过程和用途不表。有兴趣的可以自己研究。


## Mac端编辑环境
利用Mweb和腾讯云对象存储COS实现快速方便的编辑博客
对Mweb的设置如下：
![](https://tuchuang-1258055330.cos.ap-chengdu.myqcloud.com/2020/08/26/15984060068608.jpg)

1. 通过 文件-打开外部模式
2. 可以在偏好设置中勾选”启动时默认打开外部模式”
3. 在设置页面配置腾讯云Cos图床
4. 进入外部模式后, 点击左下角+, 引入文件夹, 把 /hexo/source/ 配置进去
5. 在 source文件夹下创建images文件夹, 同时将source的保存拖入的图片文件夹名称, 指定为images

`这样设置的好处是, 在MWeb编辑时, 把图片往文章拖拽或者粘贴, MWeb都会自动将图片保存在images目录, 发布时也会自动发布, 省心省事` 
    
    
## 多设备同步编辑
---------------------
    
因为hexo的架构环境在本地, 在Github上发布的只是public文件夹,
所以如果想要在2台以上的电脑上同时来维护同一份博客,
就需要构建多设备同步的编辑环境.
    
### 构建思路
    
1. 假设在公司和家中分别有A,B两台电脑
2. A电脑已经完成了本篇所讲述的hexo环境搭建,并且能把public文件夹网站文件发布到github的库master主分支
3. 此时只要把A电脑hexo文件夹下网站文件,保存到github的另外一个分支比如branch_name即可
4. 然后在B电脑将将分支branch_name的内容全部获取下来, 再更新内容时,将重新发布public文件夹并发布到master分支
5. 核心思路: 网站文件存在master分支, 所有源文件存在branch_name分支
    
### 操作步骤
    
#### 首先, 假设A电脑已经完成了hexo搭建和github连接, 进入根目录MyBlog
    
```
cd MyBlog                                       
git init #git初始化                                     
git remote add origin https://github.com/djangopan/djangopan.github.io.git #添加仓库地址 
git checkout -b hexo #新建分支branch_name, 名称是hexo, 切换到新分支
git add . #添加所有本地文件到git                        
git commit -m "This is for Mac" #git提交 
git push origin hexo #文件推送到hexo分支              
```
    
#### 然后, 在B电脑部署git环境和node.js环境, 在~目录下

```
git clone -b hexo https://github.com/djangopan/djangopan.github.io.git MyBlog # clone分支hexo的内容, 也就是所有源文件
```

此时会在\~目录上自动创建一个文件夹 MyBlog
    
```
cd MyBlog
npm install -g hexo-cli #安装hexo,注意这里不需要hexo初始化,否则之前的hexo配置参数会重置
npm install #安装依赖库
npm install hexo-deployer-git #安装git部署相关配置 
```

此时环境搭建完成。
    
之后多方面写作可以直接这样简化：
    
#### 在B电脑完成写作之后
    
```
hexo g -d # 重新生成public文件夹,并发布到 master分支
git add . # 开始讲所有源文件的更新发布                      git commit -m "This is for Windows"          git push origin hexo # 更新发布到hexo分支上 
```
    
#### 回到A电脑, 用以下指令获取branch_name分支的更新
    
```
git pull https://github.com/djangopan/djangopan.github.io hexo # 注意要<远程> <分支名称> 之间有一个空格 
hexo g -d # 重新生成public文件夹, 并发布到 master分支
git add . # 开始讲所有源文件的更新发布                      
git commit -m "This is for Mac"          
git push origin hexo # 更新发布到hexo分支上 
```
    
接下来就周而复始了。

### [补充]不利用github分支进行博客迁移

迁移的文件有：

```
1. 博客配置文件./_config.yml
2. 主题配置文件夹./theme/
3. 文章及相关内容的文件夹./source/
4. 模板文件夹./scaffolds/
5. 记录博客所有的插件的文件./package.json
```

在新Mac上配置hexo的基础环境并且重新部署：

1. 安装git，并生成密钥，保存到github账号中
2. 下载并安装Node.js（npm会自己跟着装好）
3. 使用npm安装hexo ，具体指令为npm install -g hexo-cli
❗️注意，安装完hexo之后不用hexo init
4. npm install

## 生成ssh密钥来增加连接安全
    
-------
避免每次修改博客同步都需要输入账号密码，建议添加ssh密钥。
    
```
git config --global user.name "username"
git config --global user.email "email_address"
ssh-keygen -t rsa -C "email_address"  #通过这个命令在~/.ssh文件夹下创建公钥私钥文件
cd ~/.ssh
ls # 会看到至少2个文件 id_rsa(私钥文件) id_rsa.pub(公钥文件)
```

打开 id_rsa.pub 文件, 复制所有内容
进入Github - Setting - keys页面, 新建 new SSH Key, 标题随便写, 粘贴复制内容
    
